<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kinematik-Quiz | PhysikNow</title>
<!-- MathJax für Formeln -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background: #f3f6fb;
        margin: 0;
        padding: 0;
    }
    header {
        background: #1e1e2f;
        color: #fff;
        text-align: center;
        padding: 1rem;
        font-size: 1.8rem;
        font-weight: bold;
    }
    .status {
        text-align: center;
        margin-top: 15px;
        font-size: 1.1rem;
        font-weight: bold;
    }
    .progress-bar {
        width: 90%;
        margin: 10px auto;
        background: #ddd;
        height: 12px;
        border-radius: 8px;
        overflow: hidden;
    }
    .progress {
        height: 12px;
        background: #0066ff;
        width: 0%;
        transition: width 0.3s ease-in-out;
    }
    .container {
        max-width: 800px;
        margin: 30px auto;
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        text-align: center;
    }
    .level-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .question {
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 10px;
    }
    .values {
        background: #eef4ff;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        font-weight: bold;
    }
    .input-row {
        margin-bottom: 15px;
    }
    input[type="number"] {
        width: 120px;
        padding: 8px;
        font-size: 1.1rem;
        border: 2px solid #ccc;
        border-radius: 6px;
        margin-right: 8px;
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    .buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 10px;
        flex-wrap: wrap;
    }
    button {
        padding: 10px 16px;
        font-size: 1rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.3s;
    }
    .btn-primary {
        background: #0066ff;
        color: #fff;
    }
    .btn-primary:hover {
        background: #004bbd;
    }
    .btn-hint {
        background: #8e44ad;
        color: #fff;
    }
    .btn-hint:hover {
        background: #732d91;
    }
    .hint {
        display: none;
        margin-top: 10px;
        padding: 10px;
        background: #f4eafc;
        border-left: 4px solid #8e44ad;
        font-style: italic;
    }
    .result {
        margin-top: 15px;
        font-weight: bold;
        font-size: 1.1rem;
        padding: 12px;
        border-radius: 8px;
    }
    .correct {
        background: #d4f8d4;
        color: #206020;
    }
    .wrong {
        background: #ffd6d6;
        color: #8b0000;
    }
    .score-box {
        text-align: center;
        font-size: 1.5rem;
        font-weight: bold;
        margin-top: 20px;
    }
</style>
</head>
<body>

<header>PhysikNow – Kinematik-Quiz</header>
<div class="status" id="status">Frage 0 von 0</div>
<div class="progress-bar"><div class="progress" id="progress"></div></div>
<div class="container" id="quiz-area">
    <h2>Wähle deinen Schwierigkeitsgrad</h2>
    <div class="level-buttons">
        <button class="btn-primary" onclick="startQuiz('easy')">Einführung</button>
        <button class="btn-primary" onclick="startQuiz('medium')">Fortgeschritten</button>
        <button class="btn-primary" onclick="startQuiz('hard')">Schwer</button>
    </div>
</div>
<div id="score" class="score-box"></div>

<script>
// Fragenpools
const easyQuestions = [
    { question:"Berechne die Endgeschwindigkeit", formula:"v = v_0 + a \\cdot t", values:{v0:10,a:2,t:4}, unit:"m/s", solution:18, steps:"v = 10 + 2·4 = 18" },
    { question:"Berechne die Strecke (gleichförmig)", formula:"s = v \\cdot t", values:{v:15,t:5}, unit:"m", solution:75, steps:"s = 15·5 = 75" },
    { question:"Berechne die Strecke", formula:"s = v_0 t + \\frac{1}{2} a t^2", values:{v0:10,a:3,t:4}, unit:"m", solution:64, steps:"s = 10·4 + 0.5·3·16 = 64" },
    { question:"Berechne die Zeit beim Bremsen", formula:"t = \\frac{v}{a}", values:{v:25,a:5}, unit:"s", solution:5, steps:"t=25/5=5" },
    { question:"Berechne die Endgeschwindigkeit (Bremsweg)", formula:"v = \\sqrt{2as}", values:{a:5,s:18}, unit:"m/s", solution:13.42, steps:"v=√(2·5·18)=√180=13.42" },
    { question:"Berechne die Winkelgeschwindigkeit", formula:"\\omega = \\frac{v}{r}", values:{v:12,r:3}, unit:"1/s", solution:4, steps:"ω = 12/3 = 4" }
];

const mediumQuestions = [
    { 
        question:"Berechne die Bahnkurve eines schiefen Wurfs bei t = 3s", 
        formula:"y = v_0 \\sin(\\alpha) t - \\frac{1}{2} g t^2", 
        values:{v0:25, alpha:45, t:3, g:9.81}, 
        unit:"m", 
        solution:10.09, 
        steps:"y = 25·sin45°·3 - 0.5·9.81·9 ≈ 10.09" 
    },
    { 
        question:"Berechne die Geschwindigkeit in x-Richtung beim schiefen Wurf", 
        formula:"v_x = v_0 \\cos(\\alpha)", 
        values:{v0:30, alpha:30}, 
        unit:"m/s", 
        solution:25.98, 
        steps:"v_x = 30·cos30° ≈ 25.98" 
    },
    { 
        question:"Berechne die Flugzeit eines Wurfs", 
        formula:"t = \\frac{2 v_0 \\sin(\\alpha)}{g}", 
        values:{v0:20, alpha:40, g:9.81}, 
        unit:"s", 
        solution:2.62, 
        steps:"t = (2·20·sin40°)/9.81 ≈ 2.62" 
    },
    { 
        question:"Berechne die horizontale Reichweite", 
        formula:"R = \\frac{v_0^2 \\sin(2\\alpha)}{g}", 
        values:{v0:22, alpha:35, g:9.81}, 
        unit:"m", 
        solution:47.93, 
        steps:"R = (22²·sin70°)/9.81 ≈ 47.93" 
    },
    { 
        question:"Berechne die Zentripetalbeschleunigung", 
        formula:"a_c = \\frac{v^2}{r}", 
        values:{v:18, r:12}, 
        unit:"m/s²", 
        solution:27, 
        steps:"a_c = (18²)/12 = 324/12 = 27" 
    },
    { 
        question:"Berechne die Winkelgeschwindigkeit eines Kreisels", 
        formula:"\\omega = \\sqrt{\\frac{g}{r}}", 
        values:{g:9.81, r:0.8}, 
        unit:"rad/s", 
        solution:3.5, 
        steps:"ω = √(9.81/0.8) ≈ 3.5" 
    },
    { 
        question:"Berechne die Beschleunigung bei Polarkoordinaten", 
        formula:"a = \\ddot{r} - r \\dot{\\varphi}^2", 
        values:{rddot:2, r:5, phi_dot:3}, 
        unit:"m/s²", 
        solution:-43, 
        steps:"a = 2 - 5·(3²) = 2 - 45 = -43" 
    },
    { 
        question:"Berechne die Geschwindigkeit in Polarkoordinaten", 
        formula:"v = \\sqrt{\\dot{r}^2 + (r \\dot{\\varphi})^2}", 
        values:{r_dot:4, r:6, phi_dot:2}, 
        unit:"m/s", 
        solution:13.42, 
        steps:"v = √(4² + (6·2)²) = √(16 + 144) = √160 ≈ 12.65" 
    },
    { 
        question:"Berechne die Umlaufzeit eines Satelliten", 
        formula:"T = 2\\pi \\sqrt{\\frac{r^3}{GM}}", 
        values:{r:7e6, GM:3.986e14}, 
        unit:"s", 
        solution:5820, 
        steps:"T = 2π√(7e6³ / 3.986e14) ≈ 5820" 
    },
    { 
        question:"Berechne die Geschwindigkeit bei gleichmäßiger Rotation", 
        formula:"v = \\omega r", 
        values:{omega:12, r:0.5}, 
        unit:"m/s", 
        solution:6, 
        steps:"v = 12·0.5 = 6" 
    }

];

const hardQuestions = [
    { 
        question:"Berechne die Coriolis-Beschleunigung für einen Körper, der sich mit v = 10 m/s radial nach außen bewegt, auf einer rotierenden Scheibe mit \\( \\omega = 3\\,\\text{rad/s} \\).", 
        formula:"a_C = 2 \\omega v", 
        values:{v:"10 m/s", omega:"3 rad/s"}, 
        unit:"m/s²", 
        solution:60, 
        steps:"a_C = 2·3·10 = 60 \\;\\text{m/s²}" 
    },
    { 
        question:"Berechne die Coriolis-Ablenkung Δx eines Körpers auf der Erde am Äquator nach t = 20 s bei v = 200 m/s.", 
        formula:"\\Delta x = 2 \\Omega v t", 
        values:{Omega:"7.292·10^{-5} s^{-1}", v:"200 m/s", t:"20 s"}, 
        unit:"m", 
        solution:0.58, 
        steps:"\\Delta x = 2·7.292·10^{-5}·200·20 ≈ 0.58 m" 
    },
    { 
        question:"Ein Punkt bewegt sich in Polarkoordinaten: \\( r(t) = 3t \\), \\( \\varphi(t) = t^2 \\). Berechne |v| nach t = 2 s.", 
        formula:"v = \\sqrt{\\dot{r}^2 + (r \\dot{\\varphi})^2}", 
        values:{r:"6 m", r_dot:"3 m/s", phi_dot:"4 rad/s"}, 
        unit:"m/s", 
        solution:24.19, 
        steps:"v = √(3² + (6·4)²) = √(9 + 576) = √585 ≈ 24.19" 
    },
    { 
        question:"Berechne die Normalbeschleunigung für eine Bahn mit Krümmungsradius \\( \\rho = 15 \\text{ m} \\) bei \\( v = 30 \\text{ m/s} \\).", 
        formula:"a_n = \\frac{v^2}{\\rho}", 
        values:{v:"30 m/s", rho:"15 m"}, 
        unit:"m/s²", 
        solution:60, 
        steps:"a_n = (30²)/15 = 900/15 = 60" 
    },
    { 
        question:"Ein Satellit bewegt sich in einer Ellipsenbahn. Berechne die Geschwindigkeit im Perigäum (\\( r_p = 7·10^6 \\text{ m}, r_a = 14·10^6 \\text{ m} \\)).", 
        formula:"v_p = \\sqrt{GM\\left(\\frac{2}{r_p}-\\frac{1}{a}\\right)}", 
        values:{GM:"3.986·10^{14} m³/s²", r_p:"7·10^6 m", r_a:"14·10^6 m"}, 
        unit:"m/s", 
        solution:10610, 
        steps:"a = (r_p + r_a)/2 = 10.5·10^6 → v_p ≈ 10610 m/s" 
    },
    { 
        question:"Herleite die Lagrange-Gleichung für ein Pendel bei kleinem Winkel.", 
        formula:"L = T - V, \\; T = \\frac{1}{2} m l^2 \\dot{\\theta}^2, \\; V = mgl(1-\\cos\\theta)", 
        values:{m:"m", l:"l", g:"g"}, 
        unit:"-", 
        solution:"m l^2 \\ddot{\\theta} + m g l \\theta = 0", 
        steps:"∂L/∂θ = -mglθ, ∂L/∂θ̇ = ml²θ̇ → ml²θ̈ + mglθ = 0" 
    },
    { 
        question:"Ein Punkt bewegt sich auf einer Schraubenlinie: \\( r(t)=t, \\varphi(t)=2t, z(t)=t \\). Berechne |v| bei t = 3 s.", 
        formula:"v = \\sqrt{\\dot{r}^2 + (r \\dot{\\varphi})^2 + \\dot{z}^2}", 
        values:{r:"3 m", r_dot:"1 m/s", phi_dot:"2 rad/s", z_dot:"1 m/s"}, 
        unit:"m/s", 
        solution:6.48, 
        steps:"v = √(1² + (3·2)² + 1²) = √(1+36+1) ≈ 6.48" 
    },
    { 
        question:"Berechne die beschleunigten Bezugskräfte: Coriolis- und Zentrifugalbeschleunigung für ω = 4 rad/s und v = 8 m/s.", 
        formula:"a = 2\\omega v + \\omega^2 r", 
        values:{omega:"4 rad/s", v:"8 m/s", r:"0.6 m"}, 
        unit:"m/s²", 
        solution:"a_c=64, a_z=9.6", 
        steps:"a_c=2·4·8=64, a_z=(4²)·0.6=16·0.6=9.6" 
    },
    { 
        question:"Berechne die Bahn-Beschleunigung für v(t)=20 m/s, \\( \\dot{v}=3 m/s² \\), Krümmungsradius \\( \\rho=50 m \\).", 
        formula:"\\vec{a} = a_t \\vec{t} + a_n \\vec{n}, a_t=\\dot{v}, a_n=\\frac{v^2}{\\rho}", 
        values:{v:"20 m/s", v_dot:"3 m/s²", rho:"50 m"}, 
        unit:"m/s²", 
        solution:"a = 3 (tangential) + 8 (normal)", 
        steps:"a_t=3, a_n=400/50=8" 
    }
];

let questions = [];
let shuffledQuestions = [];
let currentIndex = 0;
let score = 0;
let attempts = 0;

function startQuiz(level){
    if(level === "easy") questions = easyQuestions;
    if(level === "medium") questions = mediumQuestions;
    if(level === "hard") questions = hardQuestions;

    shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
    currentIndex = 0;
    score = 0;
    updateStatus();
    updateProgress();
    showQuestion();
}

function showQuestion(){
    const q = shuffledQuestions[currentIndex];
    const quizArea = document.getElementById("quiz-area");
    quizArea.innerHTML = `
        <div class="question">${currentIndex+1}. ${q.question}</div>
        <div class="values">Gegeben: ${Object.entries(q.values).map(([k,v])=>`${k} = ${v}`).join(", ")}</div>
        <div class="input-row"><input type="number" step="0.01" id="answer"> ${q.unit}</div>
        <div class="buttons">
            <button class="btn-primary" onclick="checkAnswer()">Auswerten</button>
            <button class="btn-hint" onclick="showHint()">Hinweis</button>
        </div>
        <div class="hint">Formel: \\(${q.formula}\\)</div>
        <div class="result" id="result"></div>
    `;
    MathJax.typeset();
    attempts = 0;
}

function showHint(){
    document.querySelector(".hint").style.display = "block";
}

function checkAnswer(){
    const q = shuffledQuestions[currentIndex];
    const userVal = parseFloat(document.getElementById("answer").value);
    const resultDiv = document.getElementById("result");

    if(isNaN(userVal)){ alert("Bitte gib eine Zahl ein."); return; }

    attempts++;
    if(Math.abs(userVal - q.solution) <= 0.1){
        resultDiv.innerHTML = `
            <div class="correct">
                ✔ Deine Antwort ist korrekt!<br>
                Lösung: ${q.solution} ${q.unit}<br>
                Formel: \\(${q.formula}\\)<br>
                Rechenweg: ${q.steps}
            </div>`;
        score++;
        MathJax.typeset();
        nextButton();
    } else {
        if(attempts === 1){
            resultDiv.innerHTML = `<div class="wrong">❌ Falsch! Du hast noch einen Versuch.</div>`;
            document.getElementById("answer").value = "";
        } else {
            resultDiv.innerHTML = `
                <div class="wrong">
                    ❌ Leider falsch.<br>
                    Richtige Lösung: ${q.solution} ${q.unit}<br>
                    Formel: \\(${q.formula}\\)<br>
                    Rechenweg: ${q.steps}
                </div>`;
            MathJax.typeset();
            nextButton();
        }
    }
}

function nextButton(){
    const quizArea = document.getElementById("quiz-area");
    if(currentIndex < shuffledQuestions.length - 1){
        quizArea.innerHTML += `<button class="btn-primary" onclick="nextQuestion()">Weiter</button>`;
    } else {
        quizArea.innerHTML += `<button class="btn-primary" onclick="endQuiz()">Quiz beenden</button>`;
    }
}

function nextQuestion(){
    currentIndex++;
    updateStatus();
    updateProgress();
    showQuestion();
}

function updateStatus(){
    document.getElementById("status").textContent = `Frage ${currentIndex+1} von ${questions.length}`;
}

function updateProgress(){
    const progress = document.getElementById("progress");
    const percent = (currentIndex / questions.length) * 100;
    progress.style.width = percent + "%";
}

function endQuiz(){
    document.getElementById("quiz-area").innerHTML = `
        <div class="score-box">Endergebnis: ${score}/${questions.length} richtig ✅</div>
        <div class="level-buttons">
            <button class="btn-primary" onclick="startQuiz('easy')">Einführung</button>
            <button class="btn-primary" onclick="startQuiz('medium')">Fortgeschritten</button>
            <button class="btn-primary" onclick="startQuiz('hard')">Schwer</button>
        </div>`;
    document.getElementById("status").textContent = "Quiz abgeschlossen!";
    updateProgress();
}
</script>
</body>
</html>
