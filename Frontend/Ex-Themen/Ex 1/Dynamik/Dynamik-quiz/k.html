<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dynamik-Quiz | PhysikNow</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f3f6fb;
      margin: 0;
      padding: 0;
    }
    header {
      background: #1e1e2f;
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
    }
    header h1 {
      font-size: 1.5rem;
      color: #00d4ff;
    }
    nav ul {
      display: flex;
      gap: 1rem;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    nav a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
    }
    nav a:hover {
      color: #00d4ff;
    }
    .status {
      text-align: center;
      margin-top: 15px;
      font-size: 1.1rem;
      font-weight: bold;
    }
    .progress-bar {
      width: 90%;
      margin: 10px auto;
      background: #ddd;
      height: 12px;
      border-radius: 8px;
      overflow: hidden;
    }
    .progress {
      height: 12px;
      background: #0066ff;
      width: 0%;
      transition: width 0.3s ease-in-out;
    }
    .container {
      max-width: 800px;
      margin: 30px auto;
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      text-align: center;
    }
    .level-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .question {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .values {
      background: #eef4ff;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 15px;
      font-weight: bold;
    }
    .input-row {
      margin-bottom: 15px;
    }
    input[type="number"] {
      width: 120px;
      padding: 8px;
      font-size: 1.1rem;
      border: 2px solid #ccc;
      border-radius: 6px;
      margin-right: 8px;
    }
    .buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 16px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn-primary {
      background: #0066ff;
      color: #fff;
    }
    .btn-primary:hover {
      background: #004bbd;
    }
    .btn-hint {
      background: #8e44ad;
      color: #fff;
    }
    .btn-hint:hover {
      background: #732d91;
    }
    .hint {
      display: none;
      margin-top: 10px;
      padding: 10px;
      background: #f4eafc;
      border-left: 4px solid #8e44ad;
      font-style: italic;
    }
    .result {
      margin-top: 15px;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 12px;
      border-radius: 8px;
    }
    .correct {
      background: #d4f8d4;
      color: #206020;
    }
    .wrong {
      background: #ffd6d6;
      color: #8b0000;
    }
    .score-box {
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>PhysikNow</h1>
    <nav>
      <ul>
        <li><a href="#">Start</a></li>
        <li><a href="#">Lerninhalt</a></li>
        <li><a href="#">Quiz</a></li>
      </ul>
    </nav>
  </header>
  <div class="status" id="status">Frage 0 von 0</div>
  <div class="progress-bar"><div class="progress" id="progress"></div></div>
  <div class="container" id="quiz-area">
    <h2>Wähle deinen Schwierigkeitsgrad</h2>
    <div class="level-buttons">
      <button class="btn-primary" onclick="startQuiz('easy')">Einführung</button>
      <button class="btn-primary" onclick="startQuiz('medium')">Fortgeschritten</button>
      <button class="btn-primary" onclick="startQuiz('hard')">Schwer</button>
    </div>
  </div>
  <div id="score" class="score-box"></div>

  <script>
    // Fragenpools und Logik
const easyQuestions = [
  { question: "Berechne die Gewichtskraft", formula: "F_G = m \cdot g", values: { m: 5, g: 9.81 }, unit: "N", solution: 49.05, steps: "F_G = 5·9.81 = 49.05" },
  { question: "Berechne die Normalkraft auf einer waagrechten Fläche", formula: "F_N = m \cdot g", values: { m: 8, g: 9.81 }, unit: "N", solution: 78.48, steps: "F_N = 8·9.81 = 78.48" },
  { question: "Berechne die Reibungskraft", formula: "F_R = \mu \cdot F_N", values: { mu: 0.3, FN: 100 }, unit: "N", solution: 30, steps: "F_R = 0.3·100 = 30" },
  { question: "Berechne die Hangabtriebskraft bei \( \alpha = 30^\circ \)", formula: "F_H = m \cdot g \cdot \sin(\alpha)", values: { m: 10, g: 9.81, alpha: 30 }, unit: "N", solution: 49.05, steps: "F_H = 10·9.81·sin(30°) = 98.1·0.5 = 49.05" },
  { question: "Berechne die Beschleunigung aus Kraft und Masse", formula: "a = \frac{F}{m}", values: { F: 20, m: 4 }, unit: "m/s²", solution: 5, steps: "a = 20 / 4 = 5" }
];
const mediumQuestions = [
  { question: "Berechne die Normalkraft auf einer schiefen Ebene (\( \alpha = 45^\circ \))", formula: "F_N = m \cdot g \cdot \cos(\alpha)", values: { m: 10, g: 9.81, alpha: 45 }, unit: "N", solution: 69.38, steps: "F_N = 10·9.81·cos(45°) ≈ 98.1·0.7071 ≈ 69.38" },
  { question: "Berechne die Reibungskraft an der schiefen Ebene", formula: "F_R = \mu \cdot F_N", values: { mu: 0.25, FN: 69.38 }, unit: "N", solution: 17.35, steps: "F_R = 0.25·69.38 ≈ 17.35" },
  { question: "Berechne die resultierende Kraft am Hang", formula: "F_res = F_H - F_R", values: { FH: 69.38, FR: 17.35 }, unit: "N", solution: 52.03, steps: "F_res = 69.38 - 17.35 = 52.03" },
  { question: "Berechne das Drehmoment", formula: "M = F \cdot r", values: { F: 15, r: 0.4 }, unit: "Nm", solution: 6, steps: "M = 15·0.4 = 6" },
  { question: "Berechne die Winkelbeschleunigung", formula: "\alpha = \frac{M}{J}", values: { M: 4, J: 2 }, unit: "rad/s²", solution: 2, steps: "\alpha = 4 / 2 = 2" }
];
const hardQuestions = [
  { question: "Berechne die Beschleunigung am Hang mit Reibung (\( \alpha = 30^\circ, \mu = 0.2 \))", formula: "a = g (\sin(\alpha) - \mu \cos(\alpha))", values: { g: 9.81, alpha: 30, mu: 0.2 }, unit: "m/s²", solution: 3.22, steps: "a = 9.81·(sin(30°) - 0.2·cos(30°)) ≈ 9.81·(0.5 - 0.1732) ≈ 3.22" },
  { question: "Berechne das Trägheitsmoment eines Vollzylinders", formula: "J = \frac{1}{2} m r^2", values: { m: 3, r: 0.3 }, unit: "kg·m²", solution: 0.135, steps: "J = 0.5·3·0.09 = 0.135" },
  { question: "Berechne die Seilkraft bei beschleunigtem Mehrkörpersystem", formula: "T = m_1 (g + a)", values: { m1: 2, g: 9.81, a: 1.5 }, unit: "N", solution: 22.62, steps: "T = 2·(9.81 + 1.5) = 2·11.31 = 22.62" },
  { question: "Berechne die Zentripetalkraft", formula: "F_Z = m \cdot \frac{v^2}{r}", values: { m: 0.8, v: 5, r: 2 }, unit: "N", solution: 10, steps: "F_Z = 0.8·25 / 2 = 20 / 2 = 10" },
  { question: "Berechne die kinetische Energie eines rotierenden Körpers", formula: "E_{rot} = \frac{1}{2} J \omega^2", values: { J: 0.5, omega: 6 }, unit: "J", solution: 9, steps: "E = 0.5·0.5·36 = 9" }
];

let questions = [];
let shuffledQuestions = [];
let currentIndex = 0;
let score = 0;
let attempts = 0;

function startQuiz(level) {
  if (level === "easy") questions = easyQuestions;
  if (level === "medium") questions = mediumQuestions;
  if (level === "hard") questions = hardQuestions;
  shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
  currentIndex = 0;
  score = 0;
  updateStatus();
  updateProgress();
  showQuestion();
}

function showQuestion() {
  const q = shuffledQuestions[currentIndex];
  const quizArea = document.getElementById("quiz-area");
  quizArea.innerHTML = `
    <div class="question">${currentIndex + 1}. ${q.question}</div>
    <div class="values">Gegeben: ${Object.entries(q.values).map(([k,v]) => `${k} = ${v}`).join(", ")}</div>
    <div class="input-row"><input type="number" step="0.01" id="answer"> ${q.unit}</div>
    <div class="buttons">
      <button class="btn-primary" onclick="checkAnswer()">Auswerten</button>
      <button class="btn-hint" onclick="showHint()">Hinweis</button>
    </div>
    <div class="hint">Formel: \(${q.formula}\)</div>
    <div class="result" id="result"></div>
  `;
  MathJax.typeset();
  attempts = 0;
}

function showHint() {
  document.querySelector(".hint").style.display = "block";
}

function checkAnswer() {
  const q = shuffledQuestions[currentIndex];
  const userVal = parseFloat(document.getElementById("answer").value);
  const resultDiv = document.getElementById("result");
  if (isNaN(userVal)) {
    alert("Bitte gib eine Zahl ein.");
    return;
  }
  attempts++;
  if (Math.abs(userVal - q.solution) <= 0.1) {
    resultDiv.innerHTML = `<div class="correct">✔ Deine Antwort ist korrekt!<br>Lösung: ${q.solution} ${q.unit}<br>Formel: \(${q.formula}\)<br>Rechenweg: ${q.steps}</div>`;
    score++;
    MathJax.typeset();
    nextButton();
  } else {
    if (attempts === 1) {
      resultDiv.innerHTML = `<div class="wrong">❌ Falsch! Du hast noch einen Versuch.</div>`;
      document.getElementById("answer").value = "";
    } else {
      resultDiv.innerHTML = `<div class="wrong">❌ Leider falsch.<br>Richtige Lösung: ${q.solution} ${q.unit}<br>Formel: \(${q.formula}\)<br>Rechenweg: ${q.steps}</div>`;
      MathJax.typeset();
      nextButton();
    }
  }
}

function nextButton() {
  const quizArea = document.getElementById("quiz-area");
  if (currentIndex < shuffledQuestions.length - 1) {
    quizArea.innerHTML += `<button class="btn-primary" onclick="nextQuestion()">Weiter</button>`;
  } else {
    quizArea.innerHTML += `<button class="btn-primary" onclick="endQuiz()">Quiz beenden</button>`;
  }
}

function nextQuestion() {
  currentIndex++;
  updateStatus();
  updateProgress();
  showQuestion();
}

function updateStatus() {
  document.getElementById("status").textContent = `Frage ${currentIndex + 1} von ${questions.length}`;
}

function updateProgress() {
  const progress = document.getElementById("progress");
  const percent = (currentIndex / questions.length) * 100;
  progress.style.width = percent + "%";
}

function endQuiz() {
  document.getElementById("quiz-area").innerHTML = `
    <div class="score-box">Endergebnis: ${score}/${questions.length} richtig ✅</div>
    <div class="level-buttons">
      <button class="btn-primary" onclick="startQuiz('easy')">Einführung</button>
      <button class="btn-primary" onclick="startQuiz('medium')">Fortgeschritten</button>
      <button class="btn-primary" onclick="startQuiz('hard')">Schwer</button>
    </div>
  `;
  document.getElementById("status").textContent = "Quiz abgeschlossen!";
  updateProgress();
}
  </script>
</body>
</html>
